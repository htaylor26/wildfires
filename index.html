<html style="font-size: 16px;">

<head>
    <meta charset=utf-8 />
    <title>Great Basin Seasonal Fire Map</title>
<meta name="description" content="US Fire MAP">
<meta name="author" content="Jeff, Hayley">
<meta name="keywords" content="Great Basin Seasonal Fires" />
<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />

  <!-- Load Leaflet -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.0.3/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet-src.js"></script>

  <!-- Load Marker Clusters -->
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.4/MarkerCluster.css" />
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.4/MarkerCluster.Default.css" />
    <script type='text/javascript' src='https://cdnjs.cloudflare.com/ajax/libs/leaflet.markercluster/1.0.4/leaflet.markercluster.js'></script>

  <!-- Load Esri Leaflet -->
    <script src="https://unpkg.com/esri-leaflet@2.0.7"></script>

  <!-- Load GeoJSON Files -->
    <script src="data1.geojson"></script>

    <style>
      body {margin:0; padding:0;}
      #map {position: absolute; top:0; bottom:0; right:0; left:0; width: 80%; height: 100%;z-index: 100;}
      #basemaps-wrapper {position: absolute; top: 2%; right: 2%; z-index: 500; background: white; padding: 10px;}
      #basemaps {margin-bottom: 5px; font-family: Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 16px;}
      #check-wrapper{position: absolute; bottom: 2%; right: 2%; padding-left: 1%; padding-right: 1%; z-index: 500; background: white; height: 225px; font-family: Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 16px;}
      .left {float: left; margin:0; padding-right: 2%; width: 40%;}
      p {font-family: Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 1.1rem;}
      h3 {font-family: Cambria, 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 1.25rem;}
      h2 {font-family: Cambria, 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 1.5rem; padding=0; margin=0.5%;}
      h1 {font-family: Cambria, 'Gill Sans', 'Gill Sans MT', Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 1.75rem;}
    </style>



<script type="text/javascript">

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-32778835-2']);
_gaq.push(['_trackPageview']);

(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
        var title = L.control({position: 'topright'}); // position of the title

title.onAdd = function (map) {
    this._div = L.DomUtil.create('div', 'title'); // create a div with a class "title"
    this._div.innerHTML = "<h3>Title MAP please</h3>";  // Title text, may use html to customize
    return this._div;
};

title.addTo(map);
.title {
    padding: 6px 8px;
    font: 14px/16px Arial, Helvetica, sans-serif;
    background: white;
    background: rgba(255,255,255,0.8);
    box-shadow: 0 0 15px rgba(0,0,0,0.2);
    border-radius: 5px;
}

</script>
</head>

<body>

<div id="map">
<div id="basemaps-wrapper" class="leaflet-bar">
  <select name="basemaps" id="basemaps" onChange="changeBasemap(basemaps)">
<option value="DarkGray">Dark Gray</option>
<option value="Imagery">Imagery</option>
<option value="NationalGeographic">National Geographic</option>
<option value="Streets">Streets</option>
<option value="Topographic">Topographic</option>
  </select>
</div>
<div id="check-wrapper" class="leaflet-bar">
<h2>Seasonal Fire Regions 2020</h2>
    <form id="checkBoxes" name="checkBoxes" style="font-family: Calibri, 'Trebuchet MS', Helvetica, sans-serif; font-size: 1.1rem; padding: 0; margin: 0;">
<input type="checkbox" name="Spring" value="Spring" checked> Spring<br>
<input type="checkbox" name="Summer" value="Summer" checked> Summer<br>
<input type="checkbox" name="Fall" value="Fall" checked> Fall<br>
    </form>
</div>


<script>


    var map = L.map('map').setView([39.6626821, -113.7630334], 6);
    var layer = L.esri.basemapLayer('Streets').addTo(map);
    //var layerLabels;

    var fireIcon = L.icon({
        iconUrl: 'fire.png', // url that links to the icon image file
        iconSize:     [32, 32], // size of the icon image in pixels
        iconAnchor:   [19, 19], // the top left corner of the icon will be aligned so that this point is at the marker's geographical location
        popupAnchor:  [0, -10] // point from which the popup should open, relative to the iconAnchor
    });
    var marker1 = L.marker([40.6,-105.9], {icon: fireIcon}).addTo(map);
    var marker2 = L.marker([37.1,-119.4], {icon: fireIcon}).addTo(map);
    var marker3 = L.marker([37.5,-91.2], {icon: fireIcon}).addTo(map);
    var marker4 = L.marker([39.4,-82.1], {icon: fireIcon}).addTo(map);
    var marker5 = L.marker([41.7,-103.4], {icon: fireIcon}).addTo(map);
    var marker6 = L.marker([32.2,-100.7], {icon: fireIcon}).addTo(map);
    var marker7 = L.marker([31.7,-110.7], {icon: fireIcon}).addTo(map);

  var pic1 = '<img src="https://ewscripps.brightspotcdn.com/dims4/default/5ad7c35/2147483647/strip/true/crop/2048x1152+0+384/resize/1280x720!/quality/90/?url=http%3A%2F%2Fewscripps-brightspot.s3.amazonaws.com%2F64%2F22%2Fbbd831ef4777923b508b777f2be4%2Fcameron-peak-fire-largest-in-state-history.jpg" alt="Cameron Peak CO" width="250">';
  var pic2 = '<img src="https://s.abcnews.com/images/US/creek-fire-01-ap-jef-200923_1600873577799_hpMain_16x9_992.jpg" alt="CA" width="250">';
  var pic3 = '<img src="https://bloximages.chicago2.vip.townnews.com/lakeexpo.com/content/tncms/assets/v3/editorial/1/72/172a43f4-116f-11eb-8fe6-6f0c42d5e291/5f8c883f40388.image.jpg" alt="MO" width="250">';
  var pic4 = '<img src="https://www.fs.usda.gov/Internet/FSE_MEDIA/fsm9_005125.jpg" alt="OH" width="250">';
  var pic5 = '<img src="https://media.ruralradio.co/wordpress/2020/08/Fire-two.jpg " alt="NE" width="250">';
  var pic6 = '<img src="https://media.ruralradio.co/wordpress/2020/08/Fire-two.jpg " alt="TX" width="250">';
  var pic7 = '<img src="https://d3kcsn1y1fg3m9.cloudfront.net/fire/incidents/7235-dd8bda92b05f04cfb0059acf95e521f6.jpeg " alt="AZ" width="250">';


  marker1.bindPopup('Cameron Peak Fire, Colorado' + '<br>'+ 'Burnt Area:	208,913 Acres'+'<br>' +pic1);
  marker2.bindPopup('Creek Fire, California'+ '<br>'+ 'Burnt Area: 379,895 Acres'+'<br>' +'<br>'+ 'Extra info:The Creek Fire is a large active wildfire which started on September 4, 2020 near Shaver Lake'  +pic2);
  marker3.bindPopup('Boardinghouse Hallow Fire, MO'+ '<br>'+ 'Burnt Area: 223.4 Acres'+'<br>' +'<br>'+ 'Extra info:This wildfire started in mid October 2020 '  +pic3);
  marker4.bindPopup('Wayne National Forest Fire, Ohio' + '<br>'+ 'Burnt Area:	32,671 Acres'+'<br>' +'<br>'+ 'Extra info: Seasonal fall wildfire ' +pic4);
  marker5.bindPopup('Hubbards Gap Fire, NE ' + '<br>'+ 'Burnt Area: 3,850 Acres'+'<br>' +pic5);
  marker6.bindPopup('Slade Fire, Texas ' + '<br>'+ 'Burnt Area: 4,898 Acres'+'<br>' +pic6);
  marker7.bindPopup('Encinos Fires, Arizona'+ '<br>'+ 'Burnt Area: 14,905 Acres'+'<br>' +'<br>'+ 'Extra info: Short grasses and bushes acted as fuel'  +pic7);







var projLayer = 0;
    var projLayer = L.geoJson(projects);

var CCblack = {
        radius: 4,
        fillColor: "#000000",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8
    };

var WFSred = {
        radius: 4,
        fillColor: "#ff0000",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8
    };

var WNRblue = {
        radius: 4,
        fillColor: "#0000ff",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8
    };

var Wyellow = {
        radius: 4,
        fillColor: "#ffff00",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8
    };

var Ogrey = {
        radius: 4,
        fillColor: "#80807e",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8
    };

var geojsonMarkerOptions = {
        radius: 6,
        fillColor: "#ff0000",
        color: "#000",
        weight: 1,
        opacity: 1,
        fillOpacity: 0.8
    };

// Function for displaying appropriate information in the popup
function onEachFeature(feature, layer) {
 if (!feature.properties || !feature.properties.Name)
 return;
 var popupOptions = {maxWidth: 500};
var popupContent = "<h3>" + feature.properties.Name + "</h3>" +
"<a href='" + feature.properties.Image + "' target=\"_blank\">"+"<img src='"+feature.properties.Image +  " ' class=\"left\" ' " + "&previewImage=true'</img></a>" +
"<p class=\"desc\"'>" + "<b>Project Description: </b>" + feature.properties.Description + "</p>" +
"<p class=\"desc\"'>" + "<b>Project Type(s): </b>" + feature.properties.Group + "</p>"
layer.bindPopup(popupContent,popupOptions);
}

//funtion to load the projects - in the beginning have everything loaded
loadProjects("All");
function loadProjects(Group){
projLayer = L.geoJSON(projects, {
pointToLayer: function (feature, latlng) {
if (Group == "All"){
return L.circleMarker(latlng, geojsonMarkerOptions);
}
for (var i=0; i<Group.length; i++){
var currGroup = Group[i]
if (feature.properties[currGroup] == 1){
return L.circleMarker(latlng, geojsonMarkerOptions);
}
}
},
onEachFeature: onEachFeature
});
map.addLayer(projLayer);
}


// Get an array of the currently checked check boxes
function getCheckedBoxes(chkBoxes) {
   var checkboxes = document.getElementsByTagName('input');
   var checkboxesChecked = [];
   for (var i=0; i<checkboxes.length; i++) {
  if (checkboxes[i].checked) {
 checkboxesChecked.push(checkboxes[i]);
  }
   }
   return checkboxesChecked.length > 0 ? checkboxesChecked : null;
};

//add an event listener to the checkboxes to listen for changes
//make an array of the currently checked thems and load themeNames//into the map
checkBoxes.addEventListener('change', function(e) {
showProjects = getCheckedBoxes("checkBoxes");
if (projLayer != 0){map.removeLayer(projLayer)}
var groupNames =[];
for (var i=0; i<showProjects.length; i++){
groupNames.push(showProjects[i].name)
}
loadProjects(groupNames);
});

function setBasemap(basemap) {
if (layer) {
 map.removeLayer(layer);
}

layer = L.esri.basemapLayer(basemap);

map.addLayer(layer);

if (layerLabels) {
 map.removeLayer(layerLabels);
}

if (basemap === 'Imagery'
|| basemap === 'Oceans'
|| basemap === 'ShadedRelief'
|| basemap === 'Terrain'
) {
 layerLabels = L.esri.basemapLayer(basemap + 'Labels');
 map.addLayer(layerLabels);
}
}

function changeBasemap(basemaps){
var basemap = basemaps.value;
setBasemap(basemap);
}


</script>
</div>

</body>
</html>
